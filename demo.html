<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تجربة النظام — الصقري للاتصالات</title>

  <!-- Bootstrap & FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <style>
    body { font-family: 'Cairo', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
    .demo-card { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border: none; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
    .btn-demo { margin: 10px; padding: 15px 25px; font-size: 16px; border-radius: 10px; }
    .stats-card { background: rgba(255,255,255,0.9); border-radius: 10px; padding: 20px; margin: 10px; }
    .feature-icon { font-size: 2rem; margin-bottom: 15px; color: #667eea; }
    .demo-header { color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
  </style>
</head>
<body>

<div class="container mt-4">
  <!-- العنوان الرئيسي -->
  <div class="text-center mb-5">
    <h1 class="demo-header">🏪 نظام الصقري للاتصالات</h1>
    <p class="demo-header lead">نظام إدارة متجر الهواتف والأكسسوارات</p>
  </div>

  <!-- بطاقة التجربة -->
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card demo-card">
        <div class="card-body p-5">
          
          <!-- الميزات الرئيسية -->
          <div class="row text-center mb-4">
            <div class="col-md-3">
              <div class="feature-icon">
                <i class="fas fa-mobile-alt"></i>
              </div>
              <h6>إدارة الهواتف</h6>
              <small class="text-muted">جديدة ومستعملة</small>
            </div>
            <div class="col-md-3">
              <div class="feature-icon">
                <i class="fas fa-box"></i>
              </div>
              <h6>إدارة الأكسسوارات</h6>
              <small class="text-muted">تصنيف ومخزون</small>
            </div>
            <div class="col-md-3">
              <div class="feature-icon">
                <i class="fas fa-shopping-cart"></i>
              </div>
              <h6>نظام المبيعات</h6>
              <small class="text-muted">فواتير وإيصالات</small>
            </div>
            <div class="col-md-3">
              <div class="feature-icon">
                <i class="fas fa-barcode"></i>
              </div>
              <h6>الباركود</h6>
              <small class="text-muted">توليد وطباعة</small>
            </div>
          </div>

          <hr class="my-4">

          <!-- أزرار التجربة -->
          <div class="text-center">
            <h4 class="mb-4">جرب النظام الآن</h4>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <a href="add_accessory.html" class="btn btn-success btn-demo w-100">
                  <i class="fas fa-plus-circle"></i><br>
                  <strong>إضافة أكسسوار</strong><br>
                  <small>أضف أكسسوار جديد للمخزون</small>
                </a>
              </div>
              <div class="col-md-6 mb-3">
                <a href="list_accessories_simple.html" class="btn btn-info btn-demo w-100">
                  <i class="fas fa-list"></i><br>
                  <strong>عرض الأكسسوارات</strong><br>
                  <small>اطلع على المخزون المحفوظ</small>
                </a>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <button class="btn btn-warning btn-demo w-100" onclick="addSampleData()">
                  <i class="fas fa-database"></i><br>
                  <strong>تحميل بيانات تجريبية</strong><br>
                  <small>أضف أمثلة لتجربة النظام</small>
                </button>
              </div>
              <div class="col-md-6 mb-3">
                <button class="btn btn-danger btn-demo w-100" onclick="clearAllData()">
                  <i class="fas fa-trash"></i><br>
                  <strong>مسح البيانات</strong><br>
                  <small>ابدأ من جديد</small>
                </button>
              </div>
            </div>
          </div>

          <hr class="my-4">

          <!-- إحصائيات سريعة -->
          <div class="row" id="stats-section">
            <div class="col-md-12">
              <h5 class="text-center mb-3">الإحصائيات الحالية</h5>
              <div class="row text-center">
                <div class="col-6 col-md-3">
                  <div class="stats-card">
                    <h4 id="accessories-count">0</h4>
                    <small>أكسسوار</small>
                  </div>
                </div>
                <div class="col-6 col-md-3">
                  <div class="stats-card">
                    <h4 id="total-quantity">0</h4>
                    <small>إجمالي الكمية</small>
                  </div>
                </div>
                <div class="col-6 col-md-3">
                  <div class="stats-card">
                    <h4 id="total-value">0</h4>
                    <small>قيمة المخزون</small>
                  </div>
                </div>
                <div class="col-6 col-md-3">
                  <div class="stats-card">
                    <h4 id="expected-profit">0</h4>
                    <small>الربح المتوقع</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <hr class="my-4">

          <!-- معلومات النظام -->
          <div class="text-center">
            <h6 class="text-muted mb-3">مميزات النظام</h6>
            <div class="row">
              <div class="col-md-4">
                <small class="text-success">✅ حفظ البيانات محلياً</small>
              </div>
              <div class="col-md-4">
                <small class="text-success">✅ حساب الضريبة 15%</small>
              </div>
              <div class="col-md-4">
                <small class="text-success">✅ واجهة عربية كاملة</small>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-4">
                <small class="text-success">✅ تصميم متجاوب</small>
              </div>
              <div class="col-md-4">
                <small class="text-success">✅ سهل الاستخدام</small>
              </div>
              <div class="col-md-4">
                <small class="text-success">✅ يعمل بدون إنترنت</small>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- مكتبات الواجهة -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- وظائف التجربة -->
<script>
  // قراءة البيانات من التخزين المحلي
  function getFromStorage(key, defaultValue = []) {
    try {
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : defaultValue;
    } catch (error) {
      return defaultValue;
    }
  }

  // حفظ البيانات
  function saveToStorage(key, data) {
    try {
      localStorage.setItem(key, JSON.stringify(data));
      return true;
    } catch (error) {
      return false;
    }
  }

  // عرض التنبيهات
  function showAlert(type, message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
    alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
    alertDiv.innerHTML = `
      ${message}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    setTimeout(() => {
      if (alertDiv.parentNode) {
        alertDiv.remove();
      }
    }, 4000);
  }

  // تحديث الإحصائيات
  function updateStats() {
    const accessories = getFromStorage('accessories', []);
    
    const totalAccessories = accessories.length;
    const totalQuantity = accessories.reduce((sum, acc) => sum + (acc.quantity_in_stock || 0), 0);
    const totalValue = accessories.reduce((sum, acc) => 
      sum + ((acc.selling_price || 0) * (acc.quantity_in_stock || 0)), 0);
    const expectedProfit = accessories.reduce((sum, acc) => {
      const profit = (acc.selling_price || 0) - (acc.purchase_price || 0);
      return sum + (profit * (acc.quantity_in_stock || 0));
    }, 0);

    document.getElementById('accessories-count').textContent = totalAccessories;
    document.getElementById('total-quantity').textContent = totalQuantity;
    document.getElementById('total-value').textContent = totalValue.toFixed(0);
    document.getElementById('expected-profit').textContent = expectedProfit.toFixed(0);
  }

  // تحميل بيانات تجريبية
  function addSampleData() {
    const sampleAccessories = [
      {
        id: 'sample_1_' + Date.now(),
        name: 'غطاء آيفون شفاف',
        category: 'case',
        description: 'غطاء حماية شفاف عالي الجودة',
        purchase_price: 20,
        selling_price: 45,
        purchase_price_with_vat: 23,
        selling_price_with_vat: 51.75,
        quantity_in_stock: 25,
        supplier: 'شركة الأغطية المتقدمة',
        notes: 'منتج عالي الجودة',
        date_added: new Date().toISOString()
      },
      {
        id: 'sample_2_' + Date.now(),
        name: 'شاحن سريع 20W',
        category: 'charger',
        description: 'شاحن سريع USB-C',
        purchase_price: 35,
        selling_price: 65,
        purchase_price_with_vat: 40.25,
        selling_price_with_vat: 74.75,
        quantity_in_stock: 15,
        supplier: 'شركة الشواحن الذكية',
        notes: 'شحن سريع وآمن',
        date_added: new Date().toISOString()
      },
      {
        id: 'sample_3_' + Date.now(),
        name: 'حماية شاشة زجاجية',
        category: 'screen_protector',
        description: 'حماية شاشة من الزجاج المقوى',
        purchase_price: 15,
        selling_price: 35,
        purchase_price_with_vat: 17.25,
        selling_price_with_vat: 40.25,
        quantity_in_stock: 40,
        supplier: 'مصنع الزجاج المقوى',
        notes: 'مقاومة للكسر',
        date_added: new Date().toISOString()
      },
      {
        id: 'sample_4_' + Date.now(),
        name: 'كابل USB-C',
        category: 'cable',
        description: 'كابل شحن ونقل بيانات',
        purchase_price: 12,
        selling_price: 25,
        purchase_price_with_vat: 13.8,
        selling_price_with_vat: 28.75,
        quantity_in_stock: 30,
        supplier: 'شركة الكابلات المتينة',
        notes: 'طول 1 متر',
        date_added: new Date().toISOString()
      },
      {
        id: 'sample_5_' + Date.now(),
        name: 'سماعات بلوتوث',
        category: 'headphone',
        description: 'سماعات لاسلكية عالية الجودة',
        purchase_price: 80,
        selling_price: 150,
        purchase_price_with_vat: 92,
        selling_price_with_vat: 172.5,
        quantity_in_stock: 8,
        supplier: 'شركة الصوتيات المتقدمة',
        notes: 'بطارية تدوم 24 ساعة',
        date_added: new Date().toISOString()
      }
    ];

    const existingAccessories = getFromStorage('accessories', []);
    const allAccessories = [...existingAccessories, ...sampleAccessories];

    if (saveToStorage('accessories', allAccessories)) {
      showAlert('success', `تم إضافة ${sampleAccessories.length} أكسسوار تجريبي بنجاح!`);
      updateStats();
    } else {
      showAlert('danger', 'فشل في تحميل البيانات التجريبية');
    }
  }

  // مسح جميع البيانات
  function clearAllData() {
    if (!confirm('هل أنت متأكد من مسح جميع البيانات؟')) return;
    
    localStorage.removeItem('accessories');
    showAlert('info', 'تم مسح جميع البيانات');
    updateStats();
  }

  // تهيئة الصفحة
  document.addEventListener('DOMContentLoaded', function() {
    updateStats();
    
    // تحديث الإحصائيات كل 3 ثوانِ
    setInterval(updateStats, 3000);
  });
</script>

</body>
</html>
