<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اختبار الأرقام العربية — الصقري للاتصالات</title>

  <!-- Bootstrap & FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <style>
    body { font-family: 'Cairo', sans-serif; background-color: #f8f9fa; }
    .card { margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .btn-primary { background-color: #2c3e50; border-color: #2c3e50; }
    .btn-primary:hover { background-color: #1a252f; border-color: #1a252f; }
    .demo-section { background: #fff; padding: 20px; border-radius: 10px; margin: 20px 0; }
    .number-display { font-size: 1.5em; padding: 10px; background: #e9ecef; border-radius: 5px; margin: 10px 0; }
  </style>
</head>
<body>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h3 class="text-center mb-0">
            <i class="fas fa-calculator"></i> اختبار الأرقام العربية
          </h3>
        </div>
        <div class="card-body">
          
          <!-- شرح الميزة -->
          <div class="alert alert-info">
            <h5><i class="fas fa-info-circle"></i> ميزة دعم الأرقام العربية</h5>
            <p class="mb-0">يمكنك الآن كتابة الأرقام بالعربية (٠١٢٣٤٥٦٧٨٩) وسيتم تحويلها تلقائياً للإنجليزية (0123456789)</p>
          </div>

          <!-- اختبار التحويل -->
          <div class="demo-section">
            <h5>🔢 اختبار التحويل المباشر</h5>
            <div class="row">
              <div class="col-md-6">
                <label class="form-label">اكتب أرقام عربية هنا:</label>
                <input type="text" class="form-control" id="arabic-input" placeholder="جرب: ١٢٣٤٥" oninput="convertNumbers()">
              </div>
              <div class="col-md-6">
                <label class="form-label">النتيجة بالأرقام الإنجليزية:</label>
                <div class="number-display" id="converted-output">سيظهر هنا...</div>
              </div>
            </div>
          </div>

          <!-- اختبار الحقول الرقمية -->
          <div class="demo-section">
            <h5>💰 اختبار حقول الأسعار</h5>
            <form>
              <div class="row">
                <div class="col-md-4">
                  <label class="form-label">سعر الشراء:</label>
                  <input type="number" step="0.01" class="form-control arabic-number-field" id="purchase-test" placeholder="جرب: ١٢٣.٤٥">
                </div>
                <div class="col-md-4">
                  <label class="form-label">سعر البيع:</label>
                  <input type="number" step="0.01" class="form-control arabic-number-field" id="selling-test" placeholder="جرب: ٢٠٠.٧٥">
                </div>
                <div class="col-md-4">
                  <label class="form-label">الكمية:</label>
                  <input type="number" class="form-control arabic-number-field" id="quantity-test" placeholder="جرب: ١٠">
                </div>
              </div>
              
              <div class="mt-3">
                <button type="button" class="btn btn-success" onclick="testCalculation()">
                  <i class="fas fa-calculator"></i> اختبار الحساب
                </button>
                <button type="button" class="btn btn-secondary" onclick="clearFields()">
                  <i class="fas fa-eraser"></i> مسح الحقول
                </button>
              </div>
            </form>
          </div>

          <!-- نتائج الاختبار -->
          <div class="demo-section">
            <h5>📊 نتائج الاختبار</h5>
            <div id="test-results" class="alert alert-light">
              <p class="mb-0">اكتب أرقام في الحقول أعلاه واضغط "اختبار الحساب"</p>
            </div>
          </div>

          <!-- أمثلة الأرقام -->
          <div class="demo-section">
            <h5>📝 أمثلة للتجربة</h5>
            <div class="row text-center">
              <div class="col-6 col-md-2">
                <button class="btn btn-outline-primary btn-sm w-100" onclick="fillExample('١٢٣')">١٢٣</button>
              </div>
              <div class="col-6 col-md-2">
                <button class="btn btn-outline-primary btn-sm w-100" onclick="fillExample('٤٥٦.٧٨')">٤٥٦.٧٨</button>
              </div>
              <div class="col-6 col-md-2">
                <button class="btn btn-outline-primary btn-sm w-100" onclick="fillExample('٩٨٧')">٩٨٧</button>
              </div>
              <div class="col-6 col-md-2">
                <button class="btn btn-outline-primary btn-sm w-100" onclick="fillExample('١٠.٥')">١٠.٥</button>
              </div>
              <div class="col-6 col-md-2">
                <button class="btn btn-outline-primary btn-sm w-100" onclick="fillExample('٢٠٠')">٢٠٠</button>
              </div>
              <div class="col-6 col-md-2">
                <button class="btn btn-outline-primary btn-sm w-100" onclick="fillExample('٥.٧٥')">٥.٧٥</button>
              </div>
            </div>
          </div>

          <!-- روابط التنقل -->
          <div class="text-center mt-4">
            <a href="add_accessory.html" class="btn btn-success me-2">
              <i class="fas fa-plus"></i> جرب في إضافة أكسسوار
            </a>
            <a href="index.html" class="btn btn-secondary">
              <i class="fas fa-home"></i> العودة للرئيسية
            </a>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- مكتبات الواجهة -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- وظائف اختبار الأرقام العربية -->
<script>
  // تحويل الأرقام العربية إلى إنجليزية
  function convertArabicToEnglishNumbers(str) {
    const arabicNumbers = '٠١٢٣٤٥٦٧٨٩';
    const englishNumbers = '0123456789';
    
    let result = str.toString();
    for (let i = 0; i < arabicNumbers.length; i++) {
      result = result.replace(new RegExp(arabicNumbers[i], 'g'), englishNumbers[i]);
    }
    return result;
  }

  // تحويل قيمة وإرجاع رقم صحيح
  function parseArabicNumber(value) {
    if (!value) return 0;
    const convertedValue = convertArabicToEnglishNumbers(value);
    return parseFloat(convertedValue) || 0;
  }

  // تحويل الأرقام في الحقل المباشر
  function convertNumbers() {
    const input = document.getElementById('arabic-input');
    const output = document.getElementById('converted-output');
    
    const arabicText = input.value;
    const englishText = convertArabicToEnglishNumbers(arabicText);
    
    output.innerHTML = `
      <strong>النص الأصلي:</strong> ${arabicText}<br>
      <strong>بعد التحويل:</strong> ${englishText}<br>
      <strong>كرقم:</strong> ${parseArabicNumber(arabicText)}
    `;
  }

  // إعداد دعم الأرقام العربية للحقول
  function setupArabicNumberSupport() {
    const numberFields = document.querySelectorAll('.arabic-number-field');
    
    numberFields.forEach(field => {
      field.addEventListener('input', function() {
        const cursorPosition = this.selectionStart;
        const convertedValue = convertArabicToEnglishNumbers(this.value);
        if (convertedValue !== this.value) {
          this.value = convertedValue;
          this.setSelectionRange(cursorPosition, cursorPosition);
        }
      });
    });
  }

  // اختبار الحساب
  function testCalculation() {
    const purchasePrice = parseArabicNumber(document.getElementById('purchase-test').value);
    const sellingPrice = parseArabicNumber(document.getElementById('selling-test').value);
    const quantity = parseArabicNumber(document.getElementById('quantity-test').value);
    
    const VAT_RATE = 0.15;
    const purchasePriceWithVAT = purchasePrice * (1 + VAT_RATE);
    const sellingPriceWithVAT = sellingPrice * (1 + VAT_RATE);
    const totalPurchaseValue = purchasePriceWithVAT * quantity;
    const totalSellingValue = sellingPriceWithVAT * quantity;
    const profit = totalSellingValue - totalPurchaseValue;
    
    const resultsDiv = document.getElementById('test-results');
    resultsDiv.className = 'alert alert-success';
    resultsDiv.innerHTML = `
      <h6><i class="fas fa-check-circle"></i> نتائج الحساب:</h6>
      <div class="row">
        <div class="col-md-6">
          <p><strong>سعر الشراء:</strong> ${purchasePrice.toFixed(2)} ريال</p>
          <p><strong>مع الضريبة:</strong> ${purchasePriceWithVAT.toFixed(2)} ريال</p>
          <p><strong>سعر البيع:</strong> ${sellingPrice.toFixed(2)} ريال</p>
          <p><strong>مع الضريبة:</strong> ${sellingPriceWithVAT.toFixed(2)} ريال</p>
        </div>
        <div class="col-md-6">
          <p><strong>الكمية:</strong> ${quantity}</p>
          <p><strong>إجمالي الشراء:</strong> ${totalPurchaseValue.toFixed(2)} ريال</p>
          <p><strong>إجمالي البيع:</strong> ${totalSellingValue.toFixed(2)} ريال</p>
          <p><strong>الربح:</strong> <span class="text-success">${profit.toFixed(2)} ريال</span></p>
        </div>
      </div>
    `;
  }

  // مسح الحقول
  function clearFields() {
    document.getElementById('purchase-test').value = '';
    document.getElementById('selling-test').value = '';
    document.getElementById('quantity-test').value = '';
    document.getElementById('test-results').className = 'alert alert-light';
    document.getElementById('test-results').innerHTML = '<p class="mb-0">تم مسح الحقول</p>';
  }

  // ملء مثال
  function fillExample(number) {
    document.getElementById('arabic-input').value = number;
    convertNumbers();
  }

  // تهيئة الصفحة
  document.addEventListener('DOMContentLoaded', function() {
    setupArabicNumberSupport();
    
    // مثال افتراضي
    document.getElementById('arabic-input').value = '١٢٣٤٥';
    convertNumbers();
  });
</script>

</body>
</html>
